{# partials/card_view.html #}
<div class="space-y-4">
  {% set ns = namespace(seen="") %}
  {% for c in p.components %}
    {% if ns.seen.find(c.component_no ~ "-" ~ c.reason) == -1 %}
      {% set ns.seen = ns.seen + c.component_no ~ "-" ~ c.reason ~ "," %}
      <div class="p-4 border rounded-lg shadow-sm bg-white">
        <div class="grid grid-cols-4 gap-4">
          <div>
            <span class="font-semibold text-gray-700" data-translate="home.card.component_no">Component No</span>
            <div class="text-gray-800">{{ c.component_no }}</div>
          </div>
          <div>
            <span class="font-semibold text-gray-700" data-translate="home.card.component_name">Component Name</span>
            <div class="text-gray-800">{{ c.component_name }}</div>
          </div>
          <div>
            <span class="font-semibold text-gray-700" data-translate="home.card.reason">Reason</span>
            <div class="text-gray-800">{{ c.reason }}</div>
          </div>
          <div>
            <span class="font-semibold text-gray-700" data-translate="home.card.priority">Priority</span>
            <div class="text-gray-800">{{ c.priority }}</div>
          </div>
        </div>
        {% if c.description %}
          <div class="mt-2 text-gray-600 italic">
            <span class="font-semibold" data-translate="home.card.description">Description:</span> {{ c.description }}
          </div>
        {% endif %}
      </div>
    {% endif %}
  {% endfor %}

  {% if p.photos %}
    <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mt-4">
      {% for photo in p.photos %}
        <img src="{{ url_for('static', filename='files/uploads/' ~ p.df_filename.split('.')[0] ~ '/pictures/' ~ photo) }}" 
             class="rounded-lg shadow object-cover w-full h-48" alt="Problem Photo">
      {% endfor %}
    </div>
  {% endif %}
</div>
